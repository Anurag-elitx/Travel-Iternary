<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Travel Plan</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="navbar">
    <h1>TravelIfy</h1>
    <div>
      <a href="index.html">Home</a>
      <a href="aboutUs.html">About Us</a>
      <a href="login.html">Login</a>
      <a href="signup.html">Sign Up</a>
    </div>
  </div>

  <section class="hero">
    <h1>Your Travel Plan</h1>
    <p>Unleash the Explorer in You.</p>
  </section>

  <section class="form-section">
    <h2>
      <p>Destination: <span id="destination"></span></p>
    </h2>
    <p style="font-weight: bold; color: #4a69bd;">Number of Days: <span id="days"></span></p>
  </section>

  <section class="plan-section">
    <h2>Your Daily Plan</h2>
    <div id="plan"></div>
  </section>

  <footer style="text-align: center; margin-top: 20px; background-color: #4a69bd; color: white; padding: 10px;">
    <p>Â© 2024 TravelIfy. All rights reserved.</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Extract URL parameters
      const urlParams = new URLSearchParams(window.location.search);
      const days = parseInt(urlParams.get("days"));
      const destination = urlParams.get("destination");

      // Display the destination and number of days
      document.getElementById("destination").innerHTML = destination || "Unknown";
      document.getElementById("days").innerHTML = days || "0";

      // Fetch data from JSON file
      fetch('DataSet.json')
        .then(response => response.json())
        .then(data => {
          const cityData = data.cityItineraries.find(itinerary => itinerary.city === destination);

          if (cityData) {
            // Generate the daily plan based on fetched data
            let plan = "";
            for (let i = 0; i < Math.min(days, cityData.days.length); i++) {
              plan += `<h3><strong>Day ${i + 1}</strong></h3><ul>`;
              cityData.days[i].times.forEach(event => {
                plan += `<li><strong>${event.name}:</strong> ${event.description}</li>`;
              });
              plan += `</ul>`;
            }
            document.getElementById("plan").innerHTML = plan;
          } else {
            document.getElementById("plan").textContent = 'No data available for the selected city.';
          }
        })
        .catch(error => {
          console.error('Error fetching the data:', error);
          document.getElementById("plan").textContent = 'An error occurred while fetching the data.';
        });
    });
  </script>
</body>
</html>
